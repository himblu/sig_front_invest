<div class="container-fluid">
  <h2 class="text-center">COMPROBANTES DE PAGO</h2>

  <div class="row">
    <div class="col">
      <h2 class="text-center">PAGO DE MATRÍCULA</h2>
    </div>
  </div>
  <div class="d-flex no-block justify-content-end">
    <button (click)="sendForm();" style="color: white; letter-spacing: 0; background: #014898;" mat-stroked-button>Enviar Comprobante</button>
  </div>

  <div [formGroup]="documentForm" class="mt-3">
    <div class="w-100" formArrayName="documentList">
      <div class="row" style="height: 40px; background: #014898; color: white;">
        <div class="col-md-2" style="flex: 1; display: flex; align-items: center; justify-content: center; font-size: 90%; text-transform: uppercase;">Número Comprobante</div>
        <div class="col-md-2" style="flex: 1; display: flex; align-items: center; justify-content: center; font-size: 90%; text-transform: uppercase;">Opción de pago</div>
        <div class="col-md-2" style="flex: 1; display: flex; align-items: center; justify-content: center; font-size: 90%; text-transform: uppercase;">Detalle de comprobante de pago</div>
        <div class="col-md-2" style="flex: 1; display: flex; align-items: center; justify-content: center; font-size: 90%; text-transform: uppercase;">Fecha Depósito</div>
        <div class="col-md-2" style="flex: 1; display: flex; align-items: center; justify-content: center; font-size: 90%; text-transform: uppercase;">Fecha máxima de pago</div>
        <div class="col-md-2" style="flex: 1; display: flex; align-items: center; justify-content: center; font-size: 90%; text-transform: uppercase;">Archivo</div>
      </div>

      <ng-container *ngFor="let document of getControlDocuments(); let i = index">
        <div class="row" [formGroupName]="i">
            <div style="flex: 1;" class="col-md-2 md-4 pt-2 pr-1">
              <mat-form-field appearance="outline">
                <mat-label>Escribe el número de comprobante</mat-label>
                <input style="height: 27px;" matInput formControlName="voucher" type="text"
                onKeypress="if (event.keyCode < 45 || event.keyCode > 57 || event.keyCode == 46 || event.keyCode == 47) event.returnValue = false;"
                (blur)="onBlurVoucher(i)">
              </mat-form-field>
            </div>
            <div style="flex: 1;" class="col-md-2 md-4 pt-2 pr-1">
              <mat-form-field appearance="outline">
                <mat-label>Opción de pago</mat-label>
                <input style="height: 27px;" readonly="true" matInput type="text" value="{{detail[i].paymentOptionDesc}}">
              </mat-form-field>
            </div>
            <div style="flex: 1;" class="col-md-2 md-4 pt-2 pr-1">
              <mat-form-field appearance="outline">
                <mat-label>Detalle de comprobante de pago</mat-label>
                <input style="height: 27px;" readonly="true" matInput type="text" value="{{detail[i].fileTypeName}}">
              </mat-form-field>
            </div>
            <div style="flex: 1;" class="col-md-2 md-4 pt-2 pr-1">
              <mat-form-field appearance="outline" style="height: 62px;">
                <mat-label>Fecha Depósito</mat-label>
                <!-- <input
                  style="cursor: pointer;"
                  matInput
                  (click)="picker.open();"
                  [max]="maxDate"
                  [matDatepicker]="picker"
                  readonly formControlName="paymentDate">
                <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                <mat-datepicker #picker color="primary"></mat-datepicker> -->
                <input type="date" formControlName="paymentDate" [max]="maxDate" #paymentDateVoucher matInput (click)="paymentDateVoucher.showPicker()">
                <mat-icon style="cursor: pointer;" matSuffix (click)="paymentDateVoucher.showPicker()">calendar_month</mat-icon>
                <mat-hint>dd/mm/aaaa</mat-hint>
              </mat-form-field>
            </div>
            <div style="flex: 1;" class="col-md-2 md-4 pt-2 pr-1">
              <mat-form-field appearance="outline">
                <mat-label>Fecha máxima de pago</mat-label>
                <input style="height: 27px;" readonly="true" matInput type="text" value="{{detail[i].endDatePayment}}">
              </mat-form-field>
            </div>
            <div style="flex: 1;" class="col-md-2 md-4 pt-2 pr-1">
              <div style="border: 1px solid rgba(0, 0, 0, 0.315); height: 40px; display: flex; border-radius: 4px;">
                <input
                  id="{{i +10}}"
                  style="cursor: pointer; max-width: 175px;"
                  class="mt-1 mb-1 ml-2 align-self-center"
                  #input
                  (blur)="onBlurVoucher(i)"
                  (change)="onChangeInput(input.files, i, i+10);"
                  formControlName="image" type="file" accept="image/jpeg, image/png">
              </div>
              <a><i class="fa fa-file-image-o" aria-hidden="true" style="color: green;"></i><small style="color: black;"> Imágen</small></a>
              <small
                *ngIf="form.get('image').hasError('required') && form.get('image').touched;">
                Este archivo es requerido</small>
              <small
                *ngIf="form.get('image').hasError('invalidMimeType') && form.get('image').touched;">
                Este archivo no es una imagen</small>
              <small
                *ngIf="form.get('image').hasError('sizeError') && form.get('image').touched;">
                El tamaño del archivo no debe ser mayor a 5 MB</small>
            </div>
        </div>
      </ng-container>
    </div>
  </div>
  <div [formGroup]="documentArrastresForm" >
    <div formArrayName="documentArrastresList">

    <div class="row" *ngIf="getPaymentsArrastres().length>0">
      <div class="col">
        <h2 class="text-center">PAGO DE ARRASTRES DE ASIGNATURA/S </h2>
      </div>
    </div>
    <div class="row" style="height: 40px; background: #014898; color: white;" *ngIf="getPaymentsArrastres().length>0">
      <div class="col-md-4" style="flex: 1; display: flex; align-items: center; justify-content: center; font-size: 90%; text-transform: uppercase;">Número Comprobante</div>
      <div class="col-md-4" style="flex: 1; display: flex; align-items: center; justify-content: center; font-size: 90%; text-transform: uppercase;">Fecha Depósito</div>
      <div class="col-md-4" style="flex: 1; display: flex; align-items: center; justify-content: center; font-size: 90%; text-transform: uppercase;">Archivo</div>
    </div>
    <div class="row">
      <div class="col">
        <ng-container *ngFor="let document of getPaymentsArrastres(); let i = index">
          <div class="row" [formGroupName]="i">
              <div style="flex: 1;" class="col-md-4 md-4 pt-2 pr-1">
                <mat-form-field appearance="outline">
                  <mat-label>Escribe el número de comprobante</mat-label>
                  <input style="height: 27px;" matInput formControlName="voucher" type="text"
                  onKeypress="if (event.keyCode < 45 || event.keyCode > 57 || event.keyCode == 46 || event.keyCode == 47) event.returnValue = false;"
                  (blur)="onBlurVoucher(i)">
                </mat-form-field>
              </div>
              <div style="flex: 1;" class="col-md-2 md-4 pt-2 pl-1">
                <mat-form-field appearance="outline" style="height: 62px;">
                  <mat-label>Fecha Depósito</mat-label>
                  <!-- <input
                    style="cursor: pointer;"
                    matInput
                    (click)="picker.open();"
                    [max]="maxDate"
                    [matDatepicker]="picker"
                    readonly formControlName="paymentDate">
                  <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                  <mat-datepicker #picker color="primary"></mat-datepicker> -->
                  <input type="date" formControlName="paymentDate" [max]="maxDate" #paymentDate matInput (click)="paymentDate.showPicker()">
                  <mat-icon style="cursor: pointer;" matSuffix (click)="paymentDate.showPicker()">calendar_month</mat-icon>
                  <mat-hint>dd/mm/aaaa</mat-hint>
                </mat-form-field>
              </div>
              <div style="flex: 1;" class="col-md-6 md-4 pt-2 pl-2">
                <div style="border: 1px solid rgba(0, 0, 0, 0.315); height: 40px; display: flex; border-radius: 4px;">
                  <input
                    id="{{i+20}}"
                    style="cursor: pointer;"
                    class="mt-1 mb-1 ml-2 align-self-center"
                    #input
                    (blur)="onBlurVoucher(i)"
                    (change)="onChangeInput(input.files, i, i+20);"
                    formControlName="image" type="file" accept="image/jpeg, image/png">
                </div>
                <a><i class="fa fa-file-image-o" aria-hidden="true" style="color: green;"></i><small style="color: black;"> Imágen</small></a>
                <small
                  *ngIf="form.get('image').hasError('required') && form.get('image').touched;">
                  Este archivo es requerido</small>
                <small
                  *ngIf="form.get('image').hasError('invalidMimeType') && form.get('image').touched;">
                  Este archivo no es una imágen</small>
                <small
                  *ngIf="form.get('image').hasError('sizeError') && form.get('image').touched;">
                  El tamaño del archivo no debe ser mayor a 5 MB</small>
              </div>
          </div>
        </ng-container>
      </div>
    </div>
    </div>
  </div>

</div>
