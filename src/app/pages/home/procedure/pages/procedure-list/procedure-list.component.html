<div class="row animated fadeIn fast" *ngIf="isLoading">
  <div class="col-md-12">
    <div class="alert alert-info text-center">
      <h4 class="alert-heading">Cargando</h4>
      <i class="fa fa-spin fa-refresh fa-3x"></i>
      <p class="mb-0">Por favor esperar...</p>
    </div>
  </div>
</div>
<div *ngIf="!isLoading">
  <div class="card">
    <div class="card-body">
      <div class="row pl-2 pr-2">
        <ng-container [formGroup]="filtersForm">
          <div class="col-3">
            <mat-form-field class="width" appearance="outline">
              <mat-label>Tipo de Gesti칩n</mat-label>
              <mat-select formControlName="typeManagementID" (selectionChange)="getDocumentManagement();">
                <mat-option *ngFor="let item of typesManagement" [value]="item.typeManagementID">{{item.typeManagementDesc}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-3">
            <mat-form-field class="width" appearance="outline">
              <mat-label>Buscar por tr치mite</mat-label>
              <input type="text" matInput formControlName="search" (input)="getDocumentManagement();">
              <mat-icon matSuffix>search</mat-icon>
            </mat-form-field>
          </div>
          <div class="col-3">
            <button [disabled]="false"
              class="download-button"
              mat-raised-button
              (click)="openFile('api/document-management/document-management-excel', filtersForm.get('typeManagementID').value);">
              Descargar Excel
              <mat-icon class="green-icon">assignment</mat-icon>
            </button>
          </div>
          <div class="col-3" style="text-align: right;">
            <button type="button"
            mat-raised-button
            class="styleButton_sml"
            style="max-width: 100px;"
            (click)="openDialog();">
            Agregar
            </button>
          </div>
        </ng-container>
      </div>
      <div class="row pl-2 pr-2">
        <div class="col-12">
          <div class="table-responsive">
            <table class="table">
              <thead style="background-color: #004899; color: white;">
                <tr>
                  <th>Tipo de Gesti칩n</th>
                  <th>Nombre</th>
                  <th>Destinatario</th>
                  <th style="text-align: center;">Acciones</th>
                </tr>
              </thead>
              <tbody style="color: black;">
                <tr *ngFor="let item of documentsManagement">
                  <td>{{item.typeManagementDesc}}</td>
                  <td>{{item.subject}}</td>
                  <td>{{item.rolDesc}}</td>
                  <td style="text-align: center;">
                    <a type="button"
                      matTooltipPosition="above"
                      matTooltip="{{!item.statusID ? 'Activar' : 'Inactivar'}}"
                      style="cursor: pointer;"
                      [ngStyle]="{'color': !item.statusID ? 'red' : 'blue'}"
                      (click)="updateStatus(item);">
                      <i class="fa" aria-hidden="true"
                        [ngClass]="{'fa-toggle-off': !item.statusID, 'fa-toggle-on': item.statusID}">
                      </i>
                    </a>
                    <a style="cursor: pointer;"
                      mat-button
                      [disabled]="!item.canEdit"
                      matTooltipPosition="above"
                      matTooltip="Editar"
                      (click)="openDialog(item);">
                      <i class="fa fa-pencil" aria-hidden="true" [ngClass]="{'green': item.canEdit, 'gray': !item.canEdit}"></i>
                    </a>
                    <a style="cursor: pointer;"
                      matTooltipPosition="above"
                      matTooltip="Descargar PDF"
                      (click)="openFile('api/document-management/document-management/'+item.settingDocumentManagementID);">
                      <i class="fa fa-file-pdf-o" aria-hidden="true" style="color: red;"></i>
                    </a>
                  </td>
                </tr>
                <tr *ngIf="documentsManagement.length === 0">
                  <td colspan="4" style="text-align: center;">Seleccione un tipo de gesti칩n</td>
                </tr>
              </tbody>
            </table>
          </div>
          <mat-paginator
            #paginator
            [length]="length"
            [pageSize]="pageSize"
            [pageSizeOptions]="pageSizeOptions"
            (page)="pageEvent = changePage($event)">
          </mat-paginator>
        </div>
      </div>
    </div>
  </div>
</div>
