<style>
  .list-group-item  {
    border: 1px solid #ccc;
  }

  .border-primary-color {
    border: 2px solid #014898 !important;
  }
</style>
<div class="animated fadeIn">
  <div class="form-row">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <div class="row">
            <div class="col-8">
              <i class="fa fa-filter mr-1"></i>Resultados
            </div>
            <div class="col-4">
              <select name="filter.recortType" [(ngModel)]="filter.recordType" (change)="selectRecordType()" class="form-control" [disabled]="isDisabled">
                <option [ngValue]="undefined">--SELECCIONE--</option>
                <option *ngFor="let r of recordTypes" [ngValue]="r.id">{{r.name | uppercase}}</option>
              </select>
            </div>
          </div>
        </div>
        <div class="card-body" *ngIf="filter.recordType">
          <form #filterForm="ngForm">
            <div class="form-row">
              <div class="col-6">
                <div class="form-row">
                  <!-- <div class="" [ngClass]="{'col-12': !filter.collegeTypeID, 'col-3': filter.collegeTypeID}">
                    <mat-form-field class="width" appearance="outline">
                      <mat-label>Tipo</mat-label>
                      <mat-select name="collegeTypeID" [(ngModel)]="filter.collegeTypeID" (selectionChange)="getCollegesByCollegeType()">
                        <mat-option [value]="undefined">--TODOS--</mat-option>
                        <mat-option *ngFor="let i of collegeTypes" [value]="i.collegeTypeID">{{i.collegeTypeName | uppercase}}</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div> -->
                  <div class="col-12">
                    <mat-form-field class="width" appearance="outline">
                      <mat-label>Institución</mat-label>
                      <mat-select name="collegeID" [(ngModel)]="filter.collegeID" [disabled]="filter.recordType === 'I'">
                        <mat-option *ngFor="let i of colleges" [value]="i.collegeID">{{i.collegeName | uppercase}}</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </div>
              </div>
              <div class="col-3">
                <mat-form-field class="width" appearance="outline">
                  <mat-label>Buscar por Interesado</mat-label>
                  <input type="text" name="text" matInput [(ngModel)]="filter.text">
                </mat-form-field>
              </div>
              <div class="col-3">
                <div class="form-row">
                  <div class="col-6">
                    <!-- <label>F. Inicio</label> -->
                    <input type="date" name="startDate" class="form-control" [(ngModel)]="filter.startDate">
                  </div>
                  <div class="col-6">
                    <!-- <label>F. Fin</label> -->
                    <input type="date" name="finishDate" class="form-control" [min]="filter.starDate" [required]="filter.startDate" [(ngModel)]="filter.finishDate">
                  </div>
                </div>
              </div>
              <div class="col-5">
                <div class="btn-group mr-3" dropdown *ngIf="students.length && searched">
                  <button type="button" class="btn btn-light text-primary btn-sm btn-pill">{{report.typeName || 'Descargar Reporte de:'}}</button>
                  <button id="button-split" type="button" dropdownToggle class="btn btn-light text-primary btn-sm dropdown-toggle dropdown-toggle-split"
                          aria-controls="dropdown-split">
                    <span class="caret"></span>
                    <span class="sr-only visually-hidden">Split button!</span>
                  </button>
                  <ul id="dropdown-split" *dropdownMenu class="dropdown-menu"
                      role="menu" aria-labelledby="button-split">
                    <li role="menuitem" (click)="selectReportType(r)" *ngFor="let r of filteredReportTypes"><a class="dropdown-item">{{r.name | uppercase}}</a></li>
                  </ul>
                </div>
                <button class="btn btn-success btn-pill btn-sm" [disabled]="filterForm.invalid" (click)="generateReport()" *ngIf="students.length && searched">
                  <i class="fa fa-download mr-1"></i>Generar
                </button>
              </div>
              <div class="col-2 text-center">
                <button class="btn btn-sm btn-danger" *ngIf="searched" (click)="resetSearch()">
                  <i class="fa fa-repeat mr-1"></i>Reiniciar busqueda
                </button>
                <button class="btn btn-sm btn-primary" [disabled]="searching" *ngIf="!searched" (click)="searchQuantity()">
                  <i class="fa fa-search mr-1"></i>Buscar Interesados
                </button>
              </div>
              <div class="col-1"></div>
              <div class="col-4">
                <form #paginatorForm="ngForm" *ngIf="students.length && searched">
                  <div class="input-group input-group-sm">
                    <span class="input-group-text pt-1 pr-2">
                      Items por hoja
                    </span>
                    <select name="recordNumber" style="border-radius: 5px;" [(ngModel)]="pagination.recordNumber" class="form-control form-control-sm col-4 text-center">
                      <option *ngFor="let r of recordNumbers" [value]="r">{{r}}</option>
                    </select>
                    <span class="input-group-text pl-2 pt-1 pr-2">
                      {{(pagination.currentPage - 1) * pagination.recordNumber + 1}} - {{pagination.currentPage * pagination.recordNumber}} de {{pagination.totalRecords}}
                    </span>
                    <button class="btn btn-sm btn-light" *ngIf="pagination.currentPage !== 1" (click)="goToPage(pagination.currentPage - 1)">
                      <i class="fa fa-arrow-left"></i>
                    </button>
                    <button class="btn btn-sm btn-light" *ngIf="pagination.totalRecords > pagination.currentPage * pagination.recordNumber" (click)="goToPage(pagination.currentPage + 1)">
                      <i class="fa fa-arrow-right"></i>
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </form>
        </div>
        <div class="card-body text-center" *ngIf="searching">
          <i class="fa fa-spin fa-spinner fa-3x text-primary"></i> <br>
          Buscando registros.
        </div>
        <div class="card-body text-center" *ngIf="!students.length && !searched && !searching">
          <i class="fa fa-search fa-2x"></i> <br>
          Busca postulantes con esos filtros.
        </div>
        <ul class="list-group list-group-flush" *ngIf="searched">
          <li class="list-group-item text-center" *ngIf="!students.length">
            <i class="fa fa-times fa-2x"></i> <br>
            No se tienen registros para esos filtros.
          </li>
          <ng-container *ngIf="students.length">
            <li class="list-group-item bg-primary-color text-white p-1">
              <div class="form-row" style="font-weight: 500;">
                <div class="col-1">
                  <strong>Documento</strong>
                </div>
                <div class="col-3">
                  <strong>Interesado</strong>
                </div>
                <div class="col-1">
                  <strong>Celular</strong>
                </div>
                <div class="col-2">
                  <strong>Correo Electrónico</strong>
                </div>
                <div class="col-3">
                  <strong>Institución de la que Proviene</strong>
                </div>
                <div class="col-1 text-center">
                  <strong>Estado</strong>
                </div>
                <div class="col-1 text-right">
                  <br>
                </div>
              </div>
            </li>
            <li class="list-group-item p-1 mb-1" [ngClass]="{'border-primary-color shadow': p.choiced == true}" (mouseover)="p.choiced = true" (mouseleave)="p.choiced = false" *ngFor="let p of students">
              <div class="form-row">
                <div class="col-1">
                  {{p.personDocumentNumber}}
                </div>
                <div class="col-3">
                  {{p.personFullName | uppercase}}
                </div>
                <div class="col-1">
                  {{p.numberPhone || '-'}}
                </div>
                <div class="col-2">
                  {{p.emailDesc || '-'}}
                </div>
                <div class="col-3">
                  {{p.collegeName || '-'}}
                </div>
                <div class="col-1 text-center">
                  <i class="fa mr-1" [ngClass]="{'fa-check-circle text-success': p.statusID === 2, 'fa-circle-o text-secondary': p.statusID === 1}"></i>
                  {{p.statusID === 1 ? 'PENDIENTE' : 'REALIZADO'}}
                </div>
                <div class="col-1 text-right">
                  <span [matMenuTriggerFor]="menu" class="hand" *ngIf="p.statusID === 2">
                    <i class="fa fa-ellipsis-v fa-2x mr-3"></i>
                  </span>
                  <mat-menu #menu="matMenu">
                    <button mat-menu-item *ngFor="let i of p.surveysCompletes" (click)="showIndividuaReport(i)">
                      <mat-icon class="blue-icon">topic</mat-icon>
                      <span class="item">R.I. - {{i.surveyTypeName}}</span>
                    </button>
                  </mat-menu>
                </div>
              </div>
            </li>
          </ng-container>
        </ul>
      </div>
    </div>
  </div>
</div>